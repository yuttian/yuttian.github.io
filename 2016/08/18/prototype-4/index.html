<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Reno,reno_belief@163.com"><title>隐士原型 · Reno's Blog</title><meta name="description" content="注意：本文不是javascript基础教程，如果你没有接触过原型的基本知识，应该先去了解一下，推荐看《javascript高级程序设计（第三版）》第6章：面向对象的程序设计。
 上节已经提到，每个函数function都有一个prototype，即原型。这里再加一句话——每个对象都有一个proto，可"><meta name="keywords" content="Reno's blog,Hexo,HTML,CSS,Angular,Node"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css?version=0.0806"><link rel="stylesheet" href="/css/animate.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="main animated"><div class="header animated fadeInDown"><div class="site_title_container"><div class="site_title"><a href="/"><img src="/images/logo.svg"></a></div><div class="description"><a href="/about"><p class="sub_title">CaiCai , Product Designer</p></a><div class="my_socials"><a href="http://weibo.com/huluobusiji"><i class="fa fa-weibo"></i></a><a href="http://github.com/yuttian"><i class="fa fa-github"></i></a></div></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h2><a>隐士原型</a></h2></div><div class="post-content"><p> 注意：本文不是javascript基础教程，如果你没有接触过原型的基本知识，应该先去了解一下，推荐看《javascript高级程序设计（第三版）》第6章：面向对象的程序设计。</p>
<p> 上节已经提到，每个函数function都有一个prototype，即原型。这里再加一句话——每个对象都有一个<strong>proto</strong>，可成为隐式原型。<br><a id="more"></a></p>
<p>这个<strong>proto</strong>是一个隐藏的属性，javascript不希望开发者用到这个属性值，有的低版本浏览器甚至不支持这个属性值。所以你在Visual Studio 2012这样很高级很智能的编辑器中，都不会有<strong>proto</strong>的智能提示，但是你不用管它，直接写出来就是了。<br><img alt="图1" src="http://images.cnitblog.com/blog/138012/201409/181508179098239.png" align="middle"><br></p>
<p><img alt="图2" src="http://images.cnitblog.com/blog/138012/201409/181508340651970.png" align="middle"><br>上面截图看来，obj.<strong>proto</strong>和Object.prototype的属性一样！这么巧！</p>
<p>答案就是一样。</p>
<p>obj这个对象本质上是被Object函数创建的，因此obj.<strong>proto</strong>=== Object.prototype。我们可以用一个图来表示。<br><img alt="图3" src="http://images.cnitblog.com/blog/138012/201409/181509180812624.png" align="middle"></p>
<p>那么上图中的“Object prototype”也是一个对象，它的<strong>proto</strong>指向哪里？</p>
<p>好问题！</p>
<p>在说明“Object prototype”之前，先说一下自定义函数的prototype。自定义函数的prototype本质上就是和 var obj = {} 是一样的，都是被Object创建，所以它的<strong>proto</strong>指向的就是Object.prototype。</p>
<p>但是Object.prototype确实一个特例——它的<strong>proto</strong>指向的是null，切记切记！<br><img alt="图4" src="http://images.cnitblog.com/blog/138012/201409/181510403153733.png" align="middle"><br>还有——函数也是一种对象，函数也有<strong>proto</strong>吗？</p>
<p>又一个好问题！——当然有。</p>
<p>函数也不是从石头缝里蹦出来的，函数也是被创建出来的。谁创建了函数呢？——Function——注意这个大写的“F”。</p>
<p>且看如下代码。<br><img alt="图5" src="http://images.cnitblog.com/blog/138012/201409/181511124714709.png" align="middle"><br>以上代码中，第一种方式是比较传统的函数创建方式，第二种是用new Functoin创建。</p>
<p>首先根本不推荐用第二种方式。</p>
<p>这里只是向大家演示，函数是被Function创建的。</p>
<p>好了，根据上面说的一句话——对象的<strong>proto</strong>指向的是创建它的函数的prototype，就会出现：Object.<strong>proto</strong> === Function.prototype。用一个图来表示。<br><img alt="图6" src="http://images.cnitblog.com/blog/138012/201409/181512068463597.png" align="middle"><br>上图中，很明显的标出了：自定义函数Foo.<strong>proto</strong>指向Function.prototype，Object.<strong>proto</strong>指向Function.prototype，唉，怎么还有一个……Function.<strong>proto</strong>指向Function.prototype？这不成了循环引用了？</p>
<p>对！是一个环形结构。</p>
<p>其实稍微想一下就明白了。Function也是一个函数，函数是一种对象，也有<strong>proto</strong>属性。既然是函数，那么它一定是被Function创建。所以——Function是被自身创建的。所以它的<strong>proto</strong>指向了自身的Prototype。</p>
<p>篇幅不少了，估计也都看烦了。快结束了。</p>
<p>最后一个问题：Function.prototype指向的对象，它的<strong>proto</strong>是不是也指向Object.prototype？</p>
<p>答案是肯定的。因为Function.prototype指向的对象也是一个普通的被Object创建的对象，所以也遵循基本的规则。</p>
<p><img alt="图7" src="http://images.cnitblog.com/blog/138012/201409/181512489403338.png" align="middle"><br>OK 本节结束，是不是很乱？</p>
<p>乱很正常。那这一节就让它先乱着，下一节我们将请另一个老朋友来帮忙，把它理清楚。这位老朋友就是——instanceof。</p>
<p>具体内容，请看下节分解。</p>
<p>此文转载自<a target="_blank" href="http://www.cnblogs.com/wangfupeng1988/p/3979290.html">http://www.cnblogs.com/wangfupeng1988/p/3979290.html</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-08-18</span><i class="fa fa-comment-o"></i><a href="/2016/08/18/prototype-4/#comments">Comments</a><i class="fa fa-tag"></i><a href="/categories/javascript/" title="javascript" class="tag">javascript </a><a href="/tags/原型/" title="原型" class="tag">原型 </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://renoblog.github.io/2016/08/18/prototype-4/,Reno's Blog,隐士原型,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2016/08/19/prototype-5/" title="instanceof" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2016/08/17/prototype-3/" title="prototype原型" class="btn">下一篇</a></li></ul></div><a id="comments"></a><div id="SOHUCS" sid="2016/08/18/prototype-4/"></div><script>(function() {
    var appid = 'cyt9GHkyx';
    var conf = 'prod_d8fda3df4772c086f3cfa85a8775208e';
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
       window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); 
    } else { 
        var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
    }
})();  </script></div></div></div></div><div class="footer"><a href="/about">About</a><a href="/archives">Archives</a><a target="_blank" href="https://github.com/yuttian">Github</a><a target="_blank" href="http://weibo.com/huluobusiji">Weibo</a><a target="_blank" href="/">Albums</a><a href="/">Links</a><div class="powered_by"><a target="_blank" href="https://www.caicai.me">Designed by CaiCai,</a><a target="_blank" href="/">Hexo Coded by Reno</a></div><div class="footer_slogan"><img src="/images/font.svg"></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/font.js"></script></body></html>